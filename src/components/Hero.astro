---
import { Icon } from 'astro-icon/components';
import { t } from '../i18n/index';
import type { Locale } from '../i18n/config';

interface Props {
  title?: string;
  subtitle?: string;
  showVideo?: boolean;
  lang?: Locale;
}

const { 
  title = "Ultimate Beauty Spa",
  subtitle,
  showVideo = true,
  lang = 'en'
} = Astro.props;
const i = t(lang);
const prefix = lang === 'fr' ? '/fr' : '';
const heroSubtitle = subtitle || i.hero.subtitle;
---

<section class="ub-hero" id="hero">
  <!-- ═══════ BACKGROUND LAYERS ═══════ -->
  <div class="ub-hero__bg" aria-hidden="true">
    <div class="ub-hero__media">
      <img
        src="https://images.unsplash.com/photo-1560066984-138dadb4c035?w=1920&h=1080&fit=crop&q=85"
        alt=""
        loading="eager"
        fetchpriority="high"
        class="ub-hero__img"
      />
    </div>
    <div class="ub-hero__overlay"></div>
    <div class="ub-hero__noise"></div>
    <div class="ub-hero__shape ub-hero__shape--1"></div>
    <div class="ub-hero__shape ub-hero__shape--2"></div>
    <div class="ub-hero__shape ub-hero__shape--3"></div>
  </div>

  <!-- ═══════ MAIN CONTENT ═══════ -->
  <div class="ub-hero__inner">
    <div class="ub-hero__side-label" aria-hidden="true">
      <span>EST. 2026 — DOUALA</span>
    </div>

    <div class="ub-hero__content">
      <div class="ub-hero__pill">
        <span class="ub-hero__pill-dot"></span>
        <span class="ub-hero__pill-text">{i.hero.badge}</span>
      </div>

      <h1 class="ub-hero__heading">
        <span class="ub-hero__line ub-hero__line--1">
          <span class="ub-hero__word">{i.hero.titleLine1}</span>
        </span>
        <span class="ub-hero__line ub-hero__line--2">
          <span class="ub-hero__word">{i.hero.titleLine2}</span>
          <span class="ub-hero__amp">&</span>
        </span>
        <span class="ub-hero__line ub-hero__line--3">
          <span class="ub-hero__word">{i.hero.titleLine3}</span>
        </span>
      </h1>

      <div class="ub-hero__sub-wrap">
        <span class="ub-hero__rule"></span>
        <p class="ub-hero__subtitle">{heroSubtitle}</p>
      </div>

      <div class="ub-hero__ctas">
        <a href={`${prefix}/book`} class="ub-hero__btn-primary">
          <span>{i.hero.cta}</span>
          <Icon name="lucide:arrow-up-right" class="w-4 h-4" />
        </a>
        <a href={`${prefix}/services`} class="ub-hero__btn-ghost">
          <span>{i.hero.secondaryCta}</span>
          <span class="ub-hero__btn-line"></span>
        </a>
      </div>

      <div class="ub-hero__proof">
        <div class="ub-hero__avatars">
          <div class="ub-hero__avatar" style="--i:0;background:#E11D48"><span>JL</span></div>
          <div class="ub-hero__avatar" style="--i:1;background:#0EA5E9"><span>AK</span></div>
          <div class="ub-hero__avatar" style="--i:2;background:#8B5CF6"><span>MR</span></div>
          <div class="ub-hero__avatar" style="--i:3;background:#F59E0B"><span>TS</span></div>
        </div>
        <div class="ub-hero__proof-text">
          <span class="ub-hero__stars" aria-label="5 out of 5 stars">★★★★★</span>
          <span class="ub-hero__proof-label">{lang === 'fr' ? 'Aimé par' : 'Loved by'} <strong>2,000+</strong> clients</span>
        </div>
      </div>
    </div>

    <div class="ub-hero__cards">
      <div class="ub-hero__card ub-hero__card--1">
        <Icon name="lucide:clock" class="w-5 h-5" />
        <div>
          <span class="ub-hero__card-label">{lang === 'fr' ? 'Ouvert' : 'Open Today'}</span>
          <span class="ub-hero__card-value">9AM — 9PM</span>
        </div>
      </div>
      <div class="ub-hero__card ub-hero__card--2">
        <Icon name="lucide:star" class="w-5 h-5" />
        <div>
          <span class="ub-hero__card-label">{lang === 'fr' ? 'Note Clients' : 'Rating'}</span>
          <span class="ub-hero__card-value">4.9 / 5.0</span>
        </div>
      </div>
    </div>
  </div>

  <div class="ub-hero__scroll" aria-hidden="true">
    <span class="ub-hero__scroll-text">{lang === 'fr' ? 'Découvrir' : 'Discover'}</span>
    <span class="ub-hero__scroll-bar"></span>
  </div>
</section>

<style>
  .ub-hero {
    position: relative;
    min-height: 100vh;
    min-height: 100dvh;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    background: var(--color-black);
  }

  .ub-hero__bg { position: absolute; inset: 0; pointer-events: none; }
  .ub-hero__media { position: absolute; inset: 0; }

  .ub-hero__img {
    width: 100%; height: 100%; object-fit: cover;
    transform: scale(1.05);
    animation: ub-hero-ken 30s ease-in-out infinite alternate;
  }

  @keyframes ub-hero-ken {
    0% { transform: scale(1.05) translate(0, 0); }
    100% { transform: scale(1.12) translate(-1%, -1%); }
  }

  .ub-hero__overlay {
    position: absolute; inset: 0;
    background:
      linear-gradient(180deg, rgba(10,10,10,0.55) 0%, rgba(10,10,10,0.25) 30%, rgba(10,10,10,0.35) 60%, rgba(10,10,10,0.85) 100%),
      linear-gradient(90deg, rgba(10,10,10,0.5) 0%, transparent 60%);
  }

  .ub-hero__noise {
    position: absolute; inset: 0; opacity: 0.035;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.08'/%3E%3C/svg%3E");
    mix-blend-mode: overlay;
  }

  .ub-hero__shape { position: absolute; border-radius: 50%; filter: blur(100px); pointer-events: none; mix-blend-mode: screen; }

  .ub-hero__shape--1 {
    width: 600px; height: 600px; background: rgba(225,29,72,0.12);
    top: -15%; right: -10%; animation: ub-shape-float 20s ease-in-out infinite;
  }

  .ub-hero__shape--2 {
    width: 400px; height: 400px; background: rgba(251,113,133,0.08);
    bottom: -10%; left: -5%; animation: ub-shape-float 25s ease-in-out infinite 4s;
  }

  .ub-hero__shape--3 {
    width: 200px; height: 200px; background: rgba(225,29,72,0.06);
    top: 30%; left: 40%; animation: ub-shape-float 18s ease-in-out infinite 8s;
  }

  @keyframes ub-shape-float {
    0%, 100% { transform: translate(0, 0) scale(1); }
    33% { transform: translate(30px, -20px) scale(1.05); }
    66% { transform: translate(-20px, 15px) scale(0.95); }
  }

  .ub-hero__inner {
    position: relative; z-index: 2; width: 100%; max-width: 1440px;
    margin: 0 auto; padding: 8rem clamp(1.5rem, 5vw, 4rem) 4rem;
    display: flex; flex-direction: column; gap: 2.5rem;
  }

  .ub-hero__side-label {
    position: absolute; left: clamp(0.5rem, 2vw, 2rem); bottom: 6rem;
    writing-mode: vertical-rl; text-orientation: mixed;
    font-size: 0.625rem; font-weight: 600; letter-spacing: 0.3em;
    text-transform: uppercase; color: rgba(255,255,255,0.25);
    transform: rotate(180deg);
    opacity: 0; animation: ub-fade-in 1s var(--ease-out-expo) 1.4s forwards;
  }

  .ub-hero__content { display: flex; flex-direction: column; gap: 1.75rem; max-width: 720px; }

  .ub-hero__pill {
    display: inline-flex; align-items: center; gap: 0.625rem;
    padding: 0.45rem 1.1rem 0.45rem 0.65rem;
    background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.1);
    border-radius: 100px; width: fit-content; backdrop-filter: blur(12px);
    opacity: 0; animation: ub-fade-up 0.7s var(--ease-out-expo) 0.2s forwards;
  }

  .ub-hero__pill-dot {
    width: 8px; height: 8px; background: var(--color-success); border-radius: 50%;
    box-shadow: 0 0 0 0 rgba(16,185,129,0.4);
    animation: ub-dot-pulse 2.5s ease-in-out infinite;
  }

  @keyframes ub-dot-pulse {
    0%,100% { box-shadow: 0 0 0 0 rgba(16,185,129,0.35); }
    50% { box-shadow: 0 0 0 6px rgba(16,185,129,0); }
  }

  .ub-hero__pill-text { font-size: 0.75rem; font-weight: 600; color: rgba(255,255,255,0.7); letter-spacing: 0.02em; }

  .ub-hero__heading {
    display: flex; flex-direction: column; margin: 0;
    font-size: clamp(3.5rem, 8vw, 7rem); font-weight: 800;
    line-height: 0.95; letter-spacing: -0.045em; color: var(--color-white);
  }

  .ub-hero__line { display: block; overflow: hidden; padding-bottom: 0.08em; }

  .ub-hero__word {
    display: inline-block; transform: translateY(110%);
    animation: ub-slide-up 1s var(--ease-out-expo) forwards;
  }

  .ub-hero__line--1 .ub-hero__word { animation-delay: 0.25s; }
  .ub-hero__line--2 .ub-hero__word { animation-delay: 0.4s; }
  .ub-hero__line--3 .ub-hero__word { animation-delay: 0.55s; color: var(--color-red); }

  @keyframes ub-slide-up { to { transform: translateY(0); } }

  .ub-hero__amp {
    display: inline-block; color: var(--color-red-light);
    margin-left: 0.12em; font-weight: 300; font-style: italic;
    opacity: 0; animation: ub-fade-in 0.6s var(--ease-out-expo) 0.7s forwards;
  }

  .ub-hero__sub-wrap {
    display: flex; align-items: flex-start; gap: 1.25rem;
    opacity: 0; animation: ub-fade-up 0.8s var(--ease-out-expo) 0.7s forwards;
  }

  .ub-hero__rule { flex-shrink: 0; width: 32px; height: 2px; background: var(--color-red); margin-top: 0.75em; }

  .ub-hero__subtitle {
    font-size: clamp(0.9375rem, 1.1vw, 1.125rem); line-height: 1.75;
    color: rgba(255,255,255,0.55); max-width: 440px; margin: 0;
  }

  .ub-hero__ctas {
    display: flex; flex-wrap: wrap; align-items: center; gap: 1.25rem;
    opacity: 0; animation: ub-fade-up 0.8s var(--ease-out-expo) 0.9s forwards;
  }

  .ub-hero__btn-primary {
    display: inline-flex; align-items: center; gap: 0.625rem;
    padding: 1rem 2rem; background: var(--color-red); color: var(--color-white);
    font-weight: 650; font-size: 0.9375rem; border-radius: 100px;
    text-decoration: none; position: relative; overflow: hidden;
    transition: all 0.4s var(--ease-out-expo);
    box-shadow: 0 0 0 0 rgba(225,29,72,0.4);
  }

  .ub-hero__btn-primary::before {
    content: ''; position: absolute; inset: 0;
    background: linear-gradient(135deg, var(--color-red-bright), var(--color-red-dark));
    opacity: 0; transition: opacity 0.4s; border-radius: inherit;
  }

  .ub-hero__btn-primary:hover { transform: translateY(-2px); box-shadow: 0 12px 40px -8px rgba(225,29,72,0.5); }
  .ub-hero__btn-primary:hover::before { opacity: 1; }
  .ub-hero__btn-primary span, .ub-hero__btn-primary [data-icon] { position: relative; z-index: 1; }

  .ub-hero__btn-ghost {
    display: inline-flex; align-items: center; gap: 0.5rem;
    padding: 1rem 0.25rem; color: rgba(255,255,255,0.7);
    font-weight: 600; font-size: 0.9375rem; text-decoration: none;
    transition: color 0.3s; position: relative;
  }

  .ub-hero__btn-line {
    position: absolute; bottom: 0.625rem; left: 0.25rem; right: 0.25rem;
    height: 1px; background: rgba(255,255,255,0.2); transition: background 0.3s;
  }

  .ub-hero__btn-ghost:hover { color: var(--color-white); }
  .ub-hero__btn-ghost:hover .ub-hero__btn-line { background: var(--color-red); }

  .ub-hero__proof {
    display: flex; align-items: center; gap: 0.875rem;
    opacity: 0; animation: ub-fade-up 0.8s var(--ease-out-expo) 1.1s forwards;
  }

  .ub-hero__avatars { display: flex; }

  .ub-hero__avatar {
    display: flex; align-items: center; justify-content: center;
    width: 34px; height: 34px; border-radius: 50%;
    margin-left: -8px; border: 2px solid rgba(255,255,255,0.2);
    font-size: 0.5625rem; font-weight: 700; color: var(--color-white);
    z-index: calc(10 - var(--i));
  }

  .ub-hero__avatar:first-child { margin-left: 0; }

  .ub-hero__proof-text { display: flex; flex-direction: column; gap: 0.0625rem; }
  .ub-hero__stars { font-size: 0.75rem; color: #FBBF24; letter-spacing: 1px; }
  .ub-hero__proof-label { font-size: 0.75rem; color: rgba(255,255,255,0.4); }
  .ub-hero__proof-label strong { color: rgba(255,255,255,0.7); font-weight: 700; }

  .ub-hero__cards {
    position: absolute; right: clamp(1.5rem, 5vw, 4rem); bottom: 8rem;
    display: flex; flex-direction: column; gap: 0.75rem; z-index: 3;
  }

  .ub-hero__card {
    display: flex; align-items: center; gap: 0.75rem;
    padding: 0.875rem 1.125rem;
    background: rgba(255,255,255,0.07);
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%);
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 1rem; opacity: 0;
    transition: transform 0.3s var(--ease-out-expo);
  }

  .ub-hero__card:hover { transform: translateY(-2px); }
  .ub-hero__card--1 { animation: ub-card-in 0.8s var(--ease-out-expo) 1s forwards; }
  .ub-hero__card--2 { animation: ub-card-in 0.8s var(--ease-out-expo) 1.2s forwards; }

  @keyframes ub-card-in {
    from { opacity: 0; transform: translateX(24px); }
    to   { opacity: 1; transform: translateX(0); }
  }

  .ub-hero__card [data-icon] { color: var(--color-red); flex-shrink: 0; }
  .ub-hero__card-label { display: block; font-size: 0.5625rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.1em; color: rgba(255,255,255,0.4); }
  .ub-hero__card-value { display: block; font-size: 0.875rem; font-weight: 700; color: var(--color-white); letter-spacing: -0.01em; }

  .ub-hero__scroll {
    position: absolute; bottom: 2rem; left: 50%; transform: translateX(-50%);
    display: flex; flex-direction: column; align-items: center; gap: 0.625rem;
    opacity: 0; animation: ub-fade-in 0.8s var(--ease-out-expo) 1.6s forwards; z-index: 2;
  }

  .ub-hero__scroll-text {
    font-size: 0.5625rem; font-weight: 600; letter-spacing: 0.25em;
    text-transform: uppercase; color: rgba(255,255,255,0.3);
  }

  .ub-hero__scroll-bar {
    width: 1px; height: 40px;
    background: linear-gradient(180deg, var(--color-red), transparent);
    animation: ub-scroll-draw 2s ease-in-out infinite; transform-origin: top;
  }

  @keyframes ub-scroll-draw {
    0%   { transform: scaleY(0); opacity: 0; }
    30%  { transform: scaleY(1); opacity: 1; }
    100% { transform: scaleY(1); opacity: 0; }
  }

  @keyframes ub-fade-in { from { opacity: 0; } to { opacity: 1; } }
  @keyframes ub-fade-up { from { opacity: 0; transform: translateY(16px); } to { opacity: 1; transform: translateY(0); } }

  @media (max-width: 1024px) {
    .ub-hero__cards { position: relative; right: auto; bottom: auto; flex-direction: row; flex-wrap: wrap; margin-top: 1rem; }
    .ub-hero__card--1, .ub-hero__card--2 { animation-name: ub-fade-up; }
    .ub-hero__side-label { display: none; }
  }

  @media (max-width: 640px) {
    .ub-hero__inner { padding-top: 7rem; padding-bottom: 5rem; }
    .ub-hero__heading { font-size: clamp(2.75rem, 12vw, 4rem); }
    .ub-hero__ctas { flex-direction: column; width: 100%; }
    .ub-hero__btn-primary { width: 100%; justify-content: center; }
    .ub-hero__btn-ghost { width: 100%; justify-content: center; }
    .ub-hero__cards { flex-direction: column; gap: 0.5rem; }
    .ub-hero__card { width: 100%; }
    .ub-hero__scroll { display: none; }
  }

  @media (prefers-reduced-motion: reduce) {
    .ub-hero__word, .ub-hero__pill, .ub-hero__sub-wrap, .ub-hero__ctas,
    .ub-hero__proof, .ub-hero__card, .ub-hero__scroll, .ub-hero__side-label, .ub-hero__amp {
      opacity: 1 !important; transform: none !important; animation: none !important;
    }
    .ub-hero__img { animation: none; }
    .ub-hero__shape { animation: none; }
    .ub-hero__pill-dot { animation: none; }
    .ub-hero__scroll-bar { animation: none; opacity: 0.4; }
  }
</style>