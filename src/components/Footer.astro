---
import { Icon } from 'astro-icon/components';
import { t } from '../i18n/index';
import type { Locale } from '../i18n/config';

interface Props {
  lang?: Locale;
}

const { lang = 'en' } = Astro.props;
const i = t(lang);
const prefix = lang === 'fr' ? '/fr' : '';

const currentYear = new Date().getFullYear();

const footerLinks = {
  services: [
    { href: `${prefix}/services#massage`, label: i.footer.massageRelaxation },
    { href: `${prefix}/services#wet-spa`, label: i.footer.wetSpaHydro },
    { href: `${prefix}/services#face-care`, label: i.footer.faceCare },
    { href: `${prefix}/services#haircuts`, label: i.footer.haircutsStyling },
    { href: `${prefix}/services#coloring`, label: i.footer.hairColoring },
    { href: `${prefix}/services#braiding`, label: i.footer.braidingLocs },
    { href: `${prefix}/services#shaves`, label: i.footer.shavingBeard },
    { href: `${prefix}/services#nails`, label: i.footer.manicurePedicure },
  ],
  products: [
    { href: `${prefix}/products/beard-oil`, label: i.footer.beardOil },
    { href: `${prefix}/products/face-serum`, label: i.footer.faceSerum },
    { href: `${prefix}/products/shea-butter`, label: i.footer.bodyButter },
    { href: `${prefix}/products/hair-oil`, label: i.footer.hairOil },
    { href: `${prefix}/products`, label: i.footer.allProducts },
  ],
  company: [
    { href: `${prefix}/about`, label: i.footer.ourStory },
    { href: `${prefix}/gallery`, label: i.footer.galleryLink },
    { href: `${prefix}/contact`, label: i.footer.contactLink },
  ],
  support: [
    { href: '#booking-modal', label: i.footer.bookAppointment },
    { href: `${prefix}/services`, label: i.footer.allServices },
    { href: `${prefix}/contact#faq`, label: i.footer.faq },
  ],
};

const socialLinks = [
  { href: 'https://web.facebook.com/ultimatebeauty0', label: 'Facebook', svg: '<path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/>' },
  { href: 'https://www.tiktok.com/@ultimatebeautysalon', label: 'TikTok', svg: '<path d="M16.6 5.82s.51.5 0 0A4.278 4.278 0 0 1 15.54 3h-3.09v12.4a2.592 2.592 0 0 1-2.59 2.5c-1.42 0-2.6-1.16-2.6-2.6 0-1.72 1.66-3.01 3.37-2.48V9.66c-3.45-.46-6.47 2.22-6.47 5.64 0 3.33 2.76 5.7 5.69 5.7 3.14 0 5.69-2.55 5.69-5.7V9.01a7.35 7.35 0 0 0 4.3 1.38V7.3s-1.88.09-3.24-1.48z"/>' },
  { href: 'https://www.snapchat.com/add/ultimatebeauty3', label: 'Snapchat', svg: '<path d="M12.166 3c1.38 0 2.873.56 3.817 1.81.682.905.886 2.088.803 3.698l-.005.092c-.022.442-.044.89-.003 1.119.038.215.155.396.277.475.353.228.749.397 1.108.549l.117.05c.464.2.864.384 1.072.563.37.319.365.693.236.972-.204.44-.693.73-1.432.847a2.198 2.198 0 0 0-.378.09c-.123.053-.16.1-.191.17-.064.141-.072.305-.08.448l-.002.052c-.021.438-.07.899-.61 1.165-.24.118-.545.18-.922.254l-.095.019c-.303.06-.646.128-.938.24-.295.112-.489.253-.792.531l-.087.08c-.6.554-1.231 1.096-2.168 1.096-.019 0-.037 0-.056-.002a1.16 1.16 0 0 1-.056.002c-.937 0-1.568-.542-2.168-1.096l-.087-.08c-.303-.278-.497-.419-.792-.531-.292-.112-.636-.18-.938-.24l-.095-.019c-.377-.074-.682-.136-.922-.254-.54-.266-.59-.727-.61-1.165l-.002-.052c-.008-.143-.016-.307-.08-.448-.031-.07-.068-.117-.19-.17a2.204 2.204 0 0 0-.379-.09c-.739-.117-1.228-.407-1.432-.847-.129-.28-.134-.653.236-.972.208-.179.608-.363 1.072-.563l.117-.05c.36-.152.755-.321 1.108-.549.122-.079.24-.26.277-.475.041-.23.019-.677-.003-1.119l-.005-.092c-.083-1.61.121-2.793.803-3.698C9.294 3.56 10.786 3 12.166 3z"/>' },
  { href: 'https://www.pinterest.com/ultimatebeautysalon', label: 'Pinterest', svg: '<path d="M12 2C6.477 2 2 6.477 2 12c0 4.236 2.636 7.855 6.356 9.312-.088-.791-.167-2.005.035-2.868.181-.78 1.172-4.97 1.172-4.97s-.299-.598-.299-1.482c0-1.388.806-2.425 1.808-2.425.853 0 1.265.64 1.265 1.408 0 .858-.546 2.14-.828 3.33-.236.995.5 1.807 1.482 1.807 1.778 0 3.144-1.874 3.144-4.58 0-2.393-1.72-4.068-4.177-4.068-2.845 0-4.515 2.135-4.515 4.34 0 .859.331 1.781.745 2.282a.3.3 0 0 1 .069.288l-.278 1.133c-.044.183-.145.222-.335.134-1.249-.581-2.03-2.407-2.03-3.874 0-3.154 2.292-6.052 6.608-6.052 3.469 0 6.165 2.473 6.165 5.776 0 3.447-2.173 6.22-5.19 6.22-1.013 0-1.965-.527-2.291-1.148l-.623 2.378c-.226.869-.835 1.958-1.244 2.621.937.29 1.931.446 2.962.446 5.523 0 10-4.477 10-10S17.523 2 12 2z"/>' },
];
---

<footer class="ft" role="contentinfo">
  <!-- Ambient glow -->
  <div class="ft-glow"></div>

  <div class="container relative z-10">
    <!-- Upper: Brand + CTA -->
    <div class="ft-upper">
      <div class="ft-brand">
        <a href={`${prefix}/`} class="ft-logo-link">
          <img src="/images/logo.svg" alt="Ultimate Beauty Spa" class="ft-logo" />
        </a>
        <p class="ft-tagline">{i.footer.brandDesc}</p>
        <div class="ft-socials">
          {socialLinks.map(social => (
            <a 
              href={social.href}
              target="_blank"
              rel="noopener noreferrer"
              class="ft-social"
              aria-label={`Follow us on ${social.label}`}
              title={social.label}
            >
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" set:html={social.svg} />
            </a>
          ))}
        </div>
      </div>

      <div class="ft-cta">
        <h3 class="ft-cta-title">{i.footer.stayUpdated}</h3>
        <p class="ft-cta-desc">{i.footer.getOffers}</p>
        <form class="ft-form" action="#" method="POST">
          <div class="ft-form-wrap">
            <Icon name="lucide:mail" class="ft-form-icon" />
            <input 
              type="email" 
              name="email"
              placeholder={i.footer.emailPlaceholder}
              required
              class="ft-input"
              aria-label="Email for newsletter"
            />
            <button type="submit" class="ft-submit">
              <Icon name="lucide:arrow-right" class="w-4 h-4" />
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Divider -->
    <div class="ft-divider">
      <div class="ft-divider-line"></div>
      <span class="ft-divider-icon">
        <Icon name="lucide:sparkles" class="w-3.5 h-3.5" />
      </span>
      <div class="ft-divider-line"></div>
    </div>

    <!-- Links Grid -->
    <div class="ft-grid">
      <!-- Services -->
      <div class="ft-col">
        <h4 class="ft-heading">{i.footer.servicesTitle}</h4>
        <ul class="ft-list">
          {footerLinks.services.map(link => (
            <li><a href={link.href}>{link.label}</a></li>
          ))}
        </ul>
      </div>

      <!-- Products -->
      <div class="ft-col">
        <h4 class="ft-heading">{i.footer.productsTitle}</h4>
        <ul class="ft-list">
          {footerLinks.products.map(link => (
            <li><a href={link.href}>{link.label}</a></li>
          ))}
        </ul>
      </div>

      <!-- Company + Support -->
      <div class="ft-col">
        <h4 class="ft-heading">{i.footer.companyTitle}</h4>
        <ul class="ft-list">
          {footerLinks.company.map(link => (
            <li><a href={link.href}>{link.label}</a></li>
          ))}
        </ul>
        <h4 class="ft-heading mt-6">{i.footer.supportTitle}</h4>
        <ul class="ft-list">
          {footerLinks.support.map(link => (
            <li><a href={link.href} data-booking-modal={link.href === '#booking-modal' ? '' : undefined}>{link.label}</a></li>
          ))}
        </ul>
      </div>

      <!-- Contact -->
      <div class="ft-col">
        <h4 class="ft-heading">{i.footer.contactTitle}</h4>
        <ul class="ft-contact">
          <li>
            <span class="ft-contact-icon">
              <Icon name="lucide:map-pin" class="w-4 h-4" />
            </span>
            <span>Avant Saint James hôtel à Bonamoussadi, Douala, Cameroon</span>
          </li>
          <li>
            <span class="ft-contact-icon">
              <Icon name="lucide:phone" class="w-4 h-4" />
            </span>
            <a href="tel:+237697113339">+237 697 113 339</a>
          </li>
          <li>
            <span class="ft-contact-icon">
              <Icon name="lucide:mail" class="w-4 h-4" />
            </span>
            <a href="mailto:hello@ultimatebeautyspa.com">hello@ultimatebeautyspa.com</a>
          </li>
          <li>
            <span class="ft-contact-icon">
              <Icon name="lucide:clock" class="w-4 h-4" />
            </span>
            <span>{lang === 'fr' ? 'Ouvert tous les jours : 9h - 21h' : 'Open Daily: 9 AM — 9 PM'}</span>
          </li>
        </ul>

        <!-- Big Book Button -->
        <a href="#booking-modal" data-booking-modal class="ft-book-btn">
          <span>{i.footer.bookAppointment}</span>
          <Icon name="lucide:arrow-up-right" class="w-4 h-4" />
        </a>
      </div>
    </div>
  </div>

  <!-- Bottom Bar -->
  <div class="ft-bottom">
    <div class="container">
      <div class="ft-bottom-inner">
        <p class="ft-copy">
          &copy; {currentYear} Ultimate Beauty Spa. {lang === 'fr' ? 'Tous droits réservés.' : 'All rights reserved.'}
        </p>
        <div class="ft-legal">
          <a href={`${prefix}/privacy`}>{i.footer.privacyPolicy}</a>
          <a href={`${prefix}/terms`}>{i.footer.termsOfService}</a>
          <a href={`${prefix}/accessibility`}>{i.footer.accessibility}</a>
          <a href={`${prefix}/cookies`}>{i.footer.cookiesPolicy}</a>
        </div>
      </div>
      <div class="ft-credit">
        <p>{i.footer.designedBy} <a href="https://bigtee.dev" target="_blank" rel="noopener noreferrer">bigtee.dev</a></p>
      </div>
    </div>
  </div>
</footer>

<style>
  /* ═══ FOOTER — Abstract Modern Design ═══ */
  .ft {
    position: relative;
    background: var(--color-black);
    overflow: hidden;
  }

  .ft-glow {
    position: absolute;
    top: -200px;
    left: 50%;
    transform: translateX(-50%);
    width: 800px;
    height: 400px;
    background: radial-gradient(ellipse, rgba(225, 29, 72, 0.08) 0%, transparent 70%);
    pointer-events: none;
  }

  /* ── Upper: Brand + CTA ── */
  .ft-upper {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 4rem;
    padding: 5rem 0 3rem;
  }

  .ft-brand {
    max-width: 340px;
    flex-shrink: 0;
  }

  .ft-logo-link {
    display: inline-block;
    margin-bottom: 1.25rem;
  }

  .ft-logo {
    height: 56px;
    width: auto;
    filter: brightness(0) invert(1);
    transition: opacity 0.3s ease;
  }

  .ft-logo-link:hover .ft-logo {
    opacity: 0.8;
  }

  .ft-tagline {
    font-size: 0.9375rem;
    color: rgba(255,255,255,0.5);
    line-height: 1.7;
    margin-bottom: 1.5rem;
  }

  .ft-socials {
    display: flex;
    gap: 0.5rem;
  }

  .ft-social {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background: rgba(255,255,255,0.06);
    color: rgba(255,255,255,0.5);
    transition: all 0.3s ease;
  }

  .ft-social:hover {
    background: var(--color-red);
    color: white;
    transform: translateY(-2px);
  }

  /* CTA Area */
  .ft-cta {
    max-width: 380px;
  }

  .ft-cta-title {
    font-size: 1.25rem;
    font-weight: 700;
    color: white;
    margin-bottom: 0.5rem;
    letter-spacing: -0.01em;
  }

  .ft-cta-desc {
    font-size: 0.875rem;
    color: rgba(255,255,255,0.45);
    margin-bottom: 1.25rem;
    line-height: 1.6;
  }

  .ft-form-wrap {
    display: flex;
    align-items: center;
    background: rgba(255,255,255,0.06);
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 100px;
    padding: 0.25rem 0.25rem 0.25rem 1rem;
    transition: border-color 0.3s ease;
  }

  .ft-form-wrap:focus-within {
    border-color: var(--color-red);
    box-shadow: 0 0 0 4px rgba(225, 29, 72, 0.1);
  }

  .ft-form-icon {
    width: 1rem;
    height: 1rem;
    color: rgba(255,255,255,0.3);
    flex-shrink: 0;
    margin-right: 0.5rem;
  }

  .ft-input {
    flex: 1;
    background: transparent;
    border: none;
    font-size: 0.875rem;
    color: white;
    outline: none;
    padding: 0.5rem 0;
    min-width: 0;
  }

  .ft-input::placeholder {
    color: rgba(255,255,255,0.35);
  }

  .ft-submit {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: var(--color-red);
    border: none;
    color: white;
    cursor: pointer;
    flex-shrink: 0;
    transition: all 0.3s ease;
  }

  .ft-submit:hover {
    background: var(--color-red-dark);
    transform: scale(1.05);
  }

  /* ── Divider ── */
  .ft-divider {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 3rem;
  }

  .ft-divider-line {
    flex: 1;
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.08), transparent);
  }

  .ft-divider-icon {
    color: rgba(255,255,255,0.15);
  }

  /* ── Links Grid ── */
  .ft-grid {
    display: grid;
    grid-template-columns: 1.5fr 1fr 1fr 1.5fr;
    gap: 2.5rem;
    padding-bottom: 4rem;
  }

  .ft-heading {
    font-size: 0.6875rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.2em;
    color: rgba(255,255,255,0.35);
    margin-bottom: 1.25rem;
    position: relative;
  }

  .ft-list {
    list-style: none;
    display: flex;
    flex-direction: column;
    gap: 0.625rem;
  }

  .ft-list a {
    font-size: 0.875rem;
    color: rgba(255,255,255,0.6);
    text-decoration: none;
    transition: all 0.25s ease;
    display: inline-block;
    position: relative;
  }

  .ft-list a:hover {
    color: white;
    transform: translateX(4px);
  }

  /* Contact */
  .ft-contact {
    list-style: none;
    display: flex;
    flex-direction: column;
    gap: 0.875rem;
  }

  .ft-contact li {
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
  }

  .ft-contact-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    border-radius: 8px;
    background: rgba(225, 29, 72, 0.1);
    color: var(--color-red);
    flex-shrink: 0;
  }

  .ft-contact span,
  .ft-contact a {
    font-size: 0.8125rem;
    color: rgba(255,255,255,0.55);
    text-decoration: none;
    line-height: 1.5;
    padding-top: 0.25rem;
  }

  .ft-contact a:hover {
    color: white;
  }

  /* Book Button */
  .ft-book-btn {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    margin-top: 1.5rem;
    padding: 0.75rem 1.5rem;
    background: var(--color-red);
    color: white;
    font-size: 0.8125rem;
    font-weight: 600;
    text-decoration: none;
    border-radius: 100px;
    transition: all 0.3s ease;
    letter-spacing: 0.02em;
  }

  .ft-book-btn:hover {
    background: var(--color-red-dark);
    transform: translateY(-2px);
    box-shadow: 0 8px 30px rgba(225, 29, 72, 0.3);
  }

  /* ── Bottom Bar ── */
  .ft-bottom {
    border-top: 1px solid rgba(255,255,255,0.06);
    padding: 1.25rem 0;
  }

  .ft-bottom-inner {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 2rem;
  }

  .ft-copy {
    font-size: 0.75rem;
    color: rgba(255,255,255,0.3);
  }

  .ft-legal {
    display: flex;
    align-items: center;
    gap: 1.5rem;
  }

  .ft-legal a {
    font-size: 0.75rem;
    color: rgba(255,255,255,0.3);
    text-decoration: none;
    transition: color 0.25s ease;
  }

  .ft-legal a:hover {
    color: rgba(255,255,255,0.7);
  }

  .ft-credit {
    text-align: center;
    padding: 0.75rem 0 0;
    border-top: 1px solid rgba(255,255,255,0.05);
    margin-top: 0.75rem;
  }

  .ft-credit p {
    font-size: 0.7rem;
    color: rgba(255,255,255,0.25);
  }

  .ft-credit a {
    color: rgba(255,255,255,0.4);
    text-decoration: none;
    transition: color 0.25s ease;
  }

  .ft-credit a:hover {
    color: var(--color-red);
  }

  /* ── Responsive ── */
  @media (max-width: 1024px) {
    .ft-upper {
      flex-direction: column;
      gap: 2.5rem;
    }

    .ft-brand,
    .ft-cta {
      max-width: 100%;
    }

    .ft-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (max-width: 640px) {
    .ft-upper {
      padding: 3.5rem 0 2.5rem;
    }

    .ft-grid {
      grid-template-columns: 1fr;
      gap: 2.5rem;
      padding-bottom: 3rem;
    }

    .ft-bottom-inner {
      flex-direction: column;
      text-align: center;
    }

    .ft-legal {
      flex-wrap: wrap;
      justify-content: center;
    }

    .ft-logo {
      height: 44px;
    }
  }
</style>
