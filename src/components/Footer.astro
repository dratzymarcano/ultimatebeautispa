---
import { Icon } from 'astro-icon/components';
import { t } from '../i18n/index';
import type { Locale } from '../i18n/config';

interface Props {
  lang?: Locale;
}

const { lang = 'en' } = Astro.props;
const i = t(lang);
const prefix = lang === 'fr' ? '/fr' : '';

const currentYear = new Date().getFullYear();

const footerLinks = {
  services: [
    { href: `${prefix}/services#massage`, label: i.footer.massageRelaxation },
    { href: `${prefix}/services#wet-spa`, label: i.footer.wetSpaHydro },
    { href: `${prefix}/services#face-care`, label: i.footer.faceCare },
    { href: `${prefix}/services#haircuts`, label: i.footer.haircutsStyling },
    { href: `${prefix}/services#coloring`, label: i.footer.hairColoring },
    { href: `${prefix}/services#braiding`, label: i.footer.braidingLocs },
    { href: `${prefix}/services#shaves`, label: i.footer.shavingBeard },
    { href: `${prefix}/services#nails`, label: i.footer.manicurePedicure },
  ],
  products: [
    { href: `${prefix}/products/beard-oil`, label: i.footer.beardOil },
    { href: `${prefix}/products/face-serum`, label: i.footer.faceSerum },
    { href: `${prefix}/products/shea-butter`, label: i.footer.bodyButter },
    { href: `${prefix}/products/hair-oil`, label: i.footer.hairOil },
    { href: `${prefix}/products`, label: i.footer.allProducts },
  ],
  company: [
    { href: `${prefix}/about`, label: i.footer.ourStory },
    { href: `${prefix}/gallery`, label: i.footer.galleryLink },
    { href: `${prefix}/contact`, label: i.footer.contactLink },
  ],
  support: [
    { href: `${prefix}/book`, label: i.footer.bookAppointment },
    { href: `${prefix}/services`, label: i.footer.allServices },
    { href: `${prefix}/contact#faq`, label: i.footer.faq },
  ],
};

const socialLinks = [
  { href: 'https://web.facebook.com/ultimatebeauty0', label: 'Facebook', svg: '<path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/>' },
  { href: 'https://www.tiktok.com/@ultimatebeautysalon', label: 'TikTok', svg: '<path d="M16.6 5.82s.51.5 0 0A4.278 4.278 0 0 1 15.54 3h-3.09v12.4a2.592 2.592 0 0 1-2.59 2.5c-1.42 0-2.6-1.16-2.6-2.6 0-1.72 1.66-3.01 3.37-2.48V9.66c-3.45-.46-6.47 2.22-6.47 5.64 0 3.33 2.76 5.7 5.69 5.7 3.14 0 5.69-2.55 5.69-5.7V9.01a7.35 7.35 0 0 0 4.3 1.38V7.3s-1.88.09-3.24-1.48z"/>' },
  { href: 'https://www.snapchat.com/add/ultimatebeauty3', label: 'Snapchat', svg: '<path d="M12.166 3c1.38 0 2.873.56 3.817 1.81.682.905.886 2.088.803 3.698l-.005.092c-.022.442-.044.89-.003 1.119.038.215.155.396.277.475.353.228.749.397 1.108.549l.117.05c.464.2.864.384 1.072.563.37.319.365.693.236.972-.204.44-.693.73-1.432.847a2.198 2.198 0 0 0-.378.09c-.123.053-.16.1-.191.17-.064.141-.072.305-.08.448l-.002.052c-.021.438-.07.899-.61 1.165-.24.118-.545.18-.922.254l-.095.019c-.303.06-.646.128-.938.24-.295.112-.489.253-.792.531l-.087.08c-.6.554-1.231 1.096-2.168 1.096-.019 0-.037 0-.056-.002a1.16 1.16 0 0 1-.056.002c-.937 0-1.568-.542-2.168-1.096l-.087-.08c-.303-.278-.497-.419-.792-.531-.292-.112-.636-.18-.938-.24l-.095-.019c-.377-.074-.682-.136-.922-.254-.54-.266-.59-.727-.61-1.165l-.002-.052c-.008-.143-.016-.307-.08-.448-.031-.07-.068-.117-.19-.17a2.204 2.204 0 0 0-.379-.09c-.739-.117-1.228-.407-1.432-.847-.129-.28-.134-.653.236-.972.208-.179.608-.363 1.072-.563l.117-.05c.36-.152.755-.321 1.108-.549.122-.079.24-.26.277-.475.041-.23.019-.677-.003-1.119l-.005-.092c-.083-1.61.121-2.793.803-3.698C9.294 3.56 10.786 3 12.166 3z"/>' },
  { href: 'https://www.pinterest.com/ultimatebeautysalon', label: 'Pinterest', svg: '<path d="M12 2C6.477 2 2 6.477 2 12c0 4.236 2.636 7.855 6.356 9.312-.088-.791-.167-2.005.035-2.868.181-.78 1.172-4.97 1.172-4.97s-.299-.598-.299-1.482c0-1.388.806-2.425 1.808-2.425.853 0 1.265.64 1.265 1.408 0 .858-.546 2.14-.828 3.33-.236.995.5 1.807 1.482 1.807 1.778 0 3.144-1.874 3.144-4.58 0-2.393-1.72-4.068-4.177-4.068-2.845 0-4.515 2.135-4.515 4.34 0 .859.331 1.781.745 2.282a.3.3 0 0 1 .069.288l-.278 1.133c-.044.183-.145.222-.335.134-1.249-.581-2.03-2.407-2.03-3.874 0-3.154 2.292-6.052 6.608-6.052 3.469 0 6.165 2.473 6.165 5.776 0 3.447-2.173 6.22-5.19 6.22-1.013 0-1.965-.527-2.291-1.148l-.623 2.378c-.226.869-.835 1.958-1.244 2.621.937.29 1.931.446 2.962.446 5.523 0 10-4.477 10-10S17.523 2 12 2z"/>' },
];
---

<footer class="footer" role="contentinfo">
  <!-- Main Footer -->
  <div class="footer-main">
    <div class="container">
      <!-- Top Row - Brand & Newsletter -->
      <div class="footer-top">
        <!-- Brand -->
        <div class="footer-brand">
          <a href={`${prefix}/`} class="brand-link">
            <div class="brand-logo">
              <span>UB</span>
            </div>
            <div class="brand-text">
              <span class="brand-name">Ultimate Beauty</span>
              <span class="brand-tag">Spa</span>
            </div>
          </a>
          <p class="brand-desc">
            {i.footer.brandDesc}
          </p>
        </div>

        <!-- Newsletter -->
        <div class="footer-newsletter">
          <h4 class="newsletter-title">{i.footer.stayUpdated}</h4>
          <p class="newsletter-desc">{i.footer.getOffers}</p>
          <form class="newsletter-form" action="#" method="POST">
            <input 
              type="email" 
              name="email"
              placeholder={i.footer.emailPlaceholder}
              required
              class="newsletter-input"
              aria-label="Email for newsletter"
            />
            <button type="submit" class="newsletter-btn" aria-label="Subscribe">
              <Icon name="lucide:arrow-up-right" size={20} />
            </button>
          </form>
        </div>
      </div>

      <!-- Divider -->
      <div class="footer-divider"></div>

      <!-- Links Grid -->
      <div class="footer-links">
        <!-- Services -->
        <div class="link-group">
          <h4 class="group-title">{i.footer.servicesTitle}</h4>
          <ul class="group-list">
            {footerLinks.services.map(link => (
              <li>
                <a href={link.href} class="group-link">{link.label}</a>
              </li>
            ))}
          </ul>
        </div>

        <!-- Products -->
        <div class="link-group">
          <h4 class="group-title">{i.footer.productsTitle}</h4>
          <ul class="group-list">
            {footerLinks.products.map(link => (
              <li>
                <a href={link.href} class="group-link">{link.label}</a>
              </li>
            ))}
          </ul>
        </div>

        <!-- Company -->
        <div class="link-group">
          <h4 class="group-title">{i.footer.companyTitle}</h4>
          <ul class="group-list">
            {footerLinks.company.map(link => (
              <li>
                <a href={link.href} class="group-link">{link.label}</a>
              </li>
            ))}
          </ul>
        </div>

        <!-- Support -->
        <div class="link-group">
          <h4 class="group-title">{i.footer.supportTitle}</h4>
          <ul class="group-list">
            {footerLinks.support.map(link => (
              <li>
                <a href={link.href} class="group-link">{link.label}</a>
              </li>
            ))}
          </ul>
        </div>

        <!-- Contact -->
        <div class="link-group">
          <h4 class="group-title">{i.footer.contactTitle}</h4>
          <ul class="group-list contact-list">
            <li>
              <Icon name="lucide:map-pin" size={16} class="text-red flex-shrink-0 mt-0.5" />
              <span>Avant Saint James hôtel à Bonamoussadi, Douala, Cameroon</span>
            </li>
            <li>
              <Icon name="lucide:phone" size={16} class="text-red flex-shrink-0 mt-0.5" />
              <a href="tel:+237697113339">+237 697 113 339</a>
            </li>
            <li>
              <Icon name="lucide:mail" size={16} class="text-red flex-shrink-0 mt-0.5" />
              <a href="mailto:hello@ultimatebeautyspa.com">hello@ultimatebeautyspa.com</a>
            </li>
          </ul>

          <!-- Social -->
          <div class="social-links">
            {socialLinks.map(social => (
              <a 
                href={social.href}
                target="_blank"
                rel="noopener noreferrer"
                class="social-link"
                aria-label={`Follow us on ${social.label}`}
                title={social.label}
              >
                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" set:html={social.svg} />
              </a>
            ))}
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Bottom Bar -->
  <div class="footer-bottom">
    <div class="container">
      <div class="bottom-content">
        <p class="copyright">
          &copy; {currentYear} Ultimate Beauty Spa. {lang === 'fr' ? 'Tous droits réservés.' : 'All rights reserved.'}
        </p>
        <div class="legal-links">
          <a href={`${prefix}/privacy`}>{i.footer.privacyPolicy}</a>
          <span class="link-dot"></span>
          <a href={`${prefix}/terms`}>{i.footer.termsOfService}</a>
          <span class="link-dot"></span>
          <a href={`${prefix}/accessibility`}>{i.footer.accessibility}</a>
        </div>
      </div>
    </div>
  </div>
</footer>

<style>
  .footer {
    background: var(--color-onyx);
    border-top: 1px solid rgba(255, 255, 255, 0.06);
  }

  /* Main Footer */
  .footer-main {
    padding: 4rem 0 3rem;
  }

  /* Top Row */
  .footer-top {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 4rem;
    margin-bottom: 3rem;
  }

  .footer-brand {
    max-width: 320px;
  }

  .brand-link {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin-bottom: 1rem;
    text-decoration: none;
  }

  .brand-logo {
    width: 48px;
    height: 48px;
    background: var(--color-red);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background 0.3s var(--ease-out-expo);
  }

  .brand-logo span {
    color: var(--color-white);
    font-size: 1.125rem;
    font-weight: 800;
    letter-spacing: -0.02em;
  }

  .brand-link:hover .brand-logo {
    background: var(--color-red-dark);
  }

  .brand-text {
    display: flex;
    flex-direction: column;
  }

  .brand-name {
    font-size: 1.375rem;
    font-weight: 800;
    color: var(--color-white);
    letter-spacing: -0.02em;
    line-height: 1;
  }

  .brand-tag {
    font-size: 0.625rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.2em;
    color: var(--color-red);
    margin-top: 0.125rem;
  }

  .brand-desc {
    font-size: 0.9375rem;
    color: var(--color-platinum);
    line-height: 1.7;
  }

  /* Newsletter */
  .footer-newsletter {
    max-width: 360px;
  }

  .newsletter-title {
    font-size: 0.6875rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    color: var(--color-white);
    margin-bottom: 0.25rem;
  }

  .newsletter-desc {
    font-size: 0.875rem;
    color: var(--color-platinum);
    margin-bottom: 1rem;
  }

  .newsletter-form {
    display: flex;
    gap: 0.5rem;
  }

  .newsletter-input {
    flex: 1;
    padding: 0.875rem 1rem;
    background: rgba(255, 255, 255, 0.06);
    border: 1.5px solid rgba(255, 255, 255, 0.1);
    border-radius: var(--radius-md);
    font-size: 0.9375rem;
    color: var(--color-white);
    transition: all 0.3s var(--ease-out-expo);
  }

  .newsletter-input::placeholder {
    color: var(--color-platinum);
  }

  .newsletter-input:hover {
    border-color: rgba(255, 255, 255, 0.2);
  }

  .newsletter-input:focus {
    outline: none;
    border-color: var(--color-red);
    box-shadow: 0 0 0 4px rgba(225, 29, 72, 0.15);
    background: rgba(255, 255, 255, 0.08);
  }

  .newsletter-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 48px;
    height: 48px;
    background: var(--color-red);
    border: none;
    border-radius: var(--radius-md);
    color: var(--color-white);
    cursor: pointer;
    transition: all 0.3s var(--ease-out-expo);
  }

  .newsletter-btn:hover {
    background: var(--color-red-dark);
    transform: translateY(-2px);
  }

  /* Divider */
  .footer-divider {
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.08), transparent);
    margin-bottom: 3rem;
  }

  /* Links Grid */
  .footer-links {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 2rem;
  }

  .link-group {
    display: flex;
    flex-direction: column;
  }

  .group-title {
    font-size: 0.6875rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    color: var(--color-white);
    margin-bottom: 1.25rem;
  }

  .group-list {
    list-style: none;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .group-link {
    font-size: 0.9375rem;
    color: var(--color-platinum);
    text-decoration: none;
    transition: color 0.3s var(--ease-out-expo);
    display: inline-block;
  }

  .group-link:hover {
    color: var(--color-red);
  }

  /* Contact List */
  .contact-list li {
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
  }

  .contact-list svg {
    color: var(--color-red);
    flex-shrink: 0;
    margin-top: 0.125rem;
  }

  .contact-list span,
  .contact-list a {
    font-size: 0.875rem;
    color: var(--color-platinum);
    text-decoration: none;
    line-height: 1.5;
  }

  .contact-list a:hover {
    color: var(--color-red);
  }

  /* Social Links */
  .social-links {
    display: flex;
    gap: 0.75rem;
    margin-top: 1.5rem;
  }

  .social-link {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    background: rgba(255, 255, 255, 0.06);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 50%;
    color: var(--color-platinum);
    transition: all 0.3s var(--ease-out-expo);
  }

  .social-link:hover {
    background: var(--color-red);
    border-color: var(--color-red);
    color: var(--color-white);
    transform: translateY(-2px);
  }

  /* Bottom Bar */
  .footer-bottom {
    padding: 1.5rem 0;
    background: var(--color-black);
    border-top: 1px solid rgba(255, 255, 255, 0.04);
  }

  .bottom-content {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 2rem;
  }

  .copyright {
    font-size: 0.8125rem;
    color: var(--color-platinum);
  }

  .legal-links {
    display: flex;
    align-items: center;
    gap: 1rem;
  }

  .legal-links a {
    font-size: 0.8125rem;
    color: var(--color-platinum);
    text-decoration: none;
    transition: color 0.3s var(--ease-out-expo);
  }

  .legal-links a:hover {
    color: var(--color-red);
  }

  .link-dot {
    width: 3px;
    height: 3px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 50%;
  }

  /* Responsive */
  @media (max-width: 1024px) {
    .footer-top {
      flex-direction: column;
      gap: 2.5rem;
    }

    .footer-brand,
    .footer-newsletter {
      max-width: 100%;
    }

    .footer-links {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (max-width: 640px) {
    .footer-main {
      padding: 3rem 0 2rem;
    }

    .footer-links {
      grid-template-columns: 1fr;
      gap: 2.5rem;
    }

    .bottom-content {
      flex-direction: column;
      text-align: center;
    }

    .legal-links {
      flex-wrap: wrap;
      justify-content: center;
    }
  }
</style>
